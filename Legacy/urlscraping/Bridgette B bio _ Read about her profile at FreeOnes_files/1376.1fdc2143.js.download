"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1376],{51376:function(e,t,o){o.d(t,{Z:function(){return C}});var n=o(55959);const s={class:"comment-container"},l={key:0,class:"pr-4 border-b border-color-border"},r={class:"flex info-comments-nav font-size-sm"},m={class:"nav flex list flex-row list-unstyled mb-0 flex-1",role:"tablist"},i={class:"flex"},a={class:"nav-link flex pt-4 pb-4 pr-4 items-center justify-center"},d=(0,n.createElementVNode)("h4",{class:"h4 mr-1"},"Comments",-1),c={class:"font-size-xs"},p={class:"tab-content px-2 md:px-6 pt-4 pb-4"};var u=o(51373),g=o(70578),f=(o(71708),o(46226),o(73247),o(22853),o(96017),o(98333),o(16493),{name:"Comments",components:{CommentBare:(0,n.defineAsyncComponent)({loader:()=>Promise.resolve().then(o.bind(o,65484)),loadingComponent:u.Z})},props:{type:{type:String,default:""},typeId:{type:String,default:""},isLoggedIn:Boolean,boardUrl:{type:String,default:""},customerLocale:{type:String,default:"en"},premiumSignupUrl:{type:String,default:""},stopWords:{type:String,default:""}},data(){return{total:0,isLoaded:!1,commentsVisible:!1}},mounted(){const e=document.getElementById("vue-comments");this.commentObserver=new g.Z(e,{},(()=>{this.commentsVisible=!0,this.commentObserver.disconnect()})),this.commentObserver.mount()},methods:{updateCommentsTotal(e){this.total=e,this.isLoaded=!0}}});var h=(0,o(83744).Z)(f,[["render",function(e,t,o,u,g,f){const h=(0,n.resolveComponent)("icon"),v=(0,n.resolveComponent)("Comment-Bare");return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,[g.isLoaded?((0,n.openBlock)(),(0,n.createElementBlock)("header",l,[(0,n.createElementVNode)("nav",r,[(0,n.createElementVNode)("ul",m,[(0,n.createElementVNode)("li",i,[(0,n.createElementVNode)("a",a,[(0,n.createVNode)(h,{icon:"forum",classes:"svg-icon-md mr-2"}),d,(0,n.createElementVNode)("span",c,"("+(0,n.toDisplayString)(g.total.toLocaleString(e.$locale))+")",1)])])])])])):(0,n.createCommentVNode)("v-if",!0),(0,n.createElementVNode)("div",p,[g.commentsVisible?((0,n.openBlock)(),(0,n.createBlock)(v,{key:0,"board-url":o.boardUrl,child:!0,type:o.type,"type-id":o.typeId,"is-logged-in":o.isLoggedIn,"premium-signup-url":o.premiumSignupUrl,"stop-words":o.stopWords,onUpdateCommentsTotal:f.updateCommentsTotal},null,8,["board-url","type","type-id","is-logged-in","premium-signup-url","stop-words","onUpdateCommentsTotal"])):(0,n.createCommentVNode)("v-if",!0)])])}]]),v=o(65484),b=o(7526),y=o(28978),C=()=>{const e=document.getElementById("vue-comments"),t=document.getElementById("vue-comments-bare"),o=document.getElementById("vue-problem-report-modal");if(e){new y.Z({Comments:h}).mount(e)}if(t){new y.Z({CommentBare:v.default}).mount(t)}if(o){new y.Z({ProblemReportModal:b.Z}).mount(o)}}},65484:function(e,t,o){o.r(t),o.d(t,{default:function(){return C}});var n=o(55959);const s={class:"flex flex-col md:flex-row comment-bare-container"},l={class:"flex flex-col flex-basis-100"},r={class:"flex flex-col font-size-sm"},m={key:1,class:"pb-4 color-text-dark font-size-xs uppercase font-bold"};var i=o(52861),a=o(9733);const d={class:"loader"},c=[(0,n.createElementVNode)("div",{class:"loader__line loader__line--xxl-height mb-3"},null,-1),(0,n.createElementVNode)("div",{class:"loader__line loader__line--xxl-height mb-3"},null,-1),(0,n.createElementVNode)("div",{class:"loader__line loader__line--xxl-height mb-3"},null,-1)];var p=o(83744);const u={};var g=(0,p.Z)(u,[["render",function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",d,c)}]]),f=o(70578),h=o(67948),v=o(51373);o(71708);const b=new a.Z;var y={name:"Comments",components:{CommentForm:(0,n.defineAsyncComponent)({loader:()=>Promise.all([o.e(7405),o.e(8254),o.e(2176)]).then(o.bind(o,12176)),loadingComponent:v.Z}),CommentStream:(0,n.defineAsyncComponent)({loader:()=>Promise.all([o.e(3294),o.e(7405),o.e(4582),o.e(4701),o.e(4419),o.e(922),o.e(4753),o.e(4480),o.e(3086),o.e(4254),o.e(1689),o.e(7489),o.e(5779),o.e(90)]).then(o.bind(o,90090)),loadingComponent:g})},props:{type:{type:String,default:""},boardUrl:{type:String,default:""},typeId:{type:String,default:""},isLoggedIn:Boolean,child:{type:Boolean,default:!1},premiumSignupUrl:{type:String,default:""},stopWords:{type:String,default:""}},emits:["update-comments-total"],data(){return{comments:[],total:0,commentsVisible:!1,isLoaded:!1,page:1}},computed:{allLoaded(){return this.isLoaded&&this.comments.length>=this.total}},mounted(){if(this.$props.child)this.commentsVisible=!0,this.$nextTick((function(){this.type&&this.typeId&&this.load()}));else{const e=document.getElementById("vue-comments-bare");this.commentObserver=new f.Z(e,{},(()=>{this.type&&this.typeId&&(this.load(),this.commentsVisible=!0),this.commentObserver.disconnect()})),this.commentObserver.mount()}},methods:{addCommentToStream(e){this.comments.unshift(e)},login(e){this.$store.state.user||b.register()},load(){let e=`/comments/${this.type}/${this.typeId}/overview`;this.page>0&&(e+=`?p=${this.page}`),i.Z.get(e).then((e=>{const t=e.data;this.total=t.total,this.$emit("update-comments-total",this.total),this.isLoaded=!0,t.items.forEach((e=>{this.comments.push(e)})),this.page++})).catch((e=>{h.Z.error("comment overview error",e),this.isLoaded=!0}))}}};var C=(0,p.Z)(y,[["render",function(e,t,o,i,a,d){const c=(0,n.resolveComponent)("Comment-Form"),p=(0,n.resolveComponent)("Comment-Stream"),u=(0,n.resolveComponent)("icon");return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("div",r,[o.isLoggedIn&&a.commentsVisible?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,type:o.type,"type-id":o.typeId,"stop-words":o.stopWords,onCommentAdded:d.addCommentToStream},null,8,["type","type-id","stop-words","onCommentAdded"])):(0,n.createCommentVNode)("v-if",!0),o.isLoggedIn?(0,n.createCommentVNode)("v-if",!0):((0,n.openBlock)(),(0,n.createElementBlock)("p",m,[(0,n.createTextVNode)(" Join the conversation, "),(0,n.createElementVNode)("a",{href:"/login",onClick:t[0]||(t[0]=(0,n.withModifiers)(((...e)=>d.login&&d.login(...e)),["prevent"]))},"login "),(0,n.createTextVNode)(" to leave comments ")])),a.isLoaded?((0,n.openBlock)(),(0,n.createBlock)(p,{key:2,comments:a.comments,"is-logged-in":o.isLoggedIn,"is-loaded":a.isLoaded,"board-url":o.boardUrl,"premium-signup-url":o.premiumSignupUrl},null,8,["comments","is-logged-in","is-loaded","board-url","premium-signup-url"])):(0,n.createCommentVNode)("v-if",!0),!d.allLoaded&&a.isLoaded?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:3,tabindex:"0",class:"btn btn-outline btn-secondary font-size-xs font-weight-light uppercase flex items-center justify-center",onClick:t[1]||(t[1]=(...e)=>d.load&&d.load(...e))},[(0,n.createVNode)(u,{icon:"add",classes:"svg-icon-sm mt-2 mb-2"}),(0,n.createTextVNode)(" Load more comments ")])):(0,n.createCommentVNode)("v-if",!0)])])])}]])},51373:function(e,t,o){o.d(t,{Z:function(){return m}});var n=o(55959);const s={class:"loader"},l=[(0,n.createElementVNode)("div",{class:"loader__line loader__line--lg-height mb-4"},null,-1)];const r={};var m=(0,o(83744).Z)(r,[["render",function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,l)}]])},98333:function(e,t,o){e.exports=o.p+"images/paper-plane-regular.717b75a7.svg"},16493:function(e,t,o){e.exports=o.p+"images/smile-regular.a911731a.svg"}}]);